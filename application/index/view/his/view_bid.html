{include file="public/shead" /}
<link rel="stylesheet" href="__WAP_PUBLIC__/time/css/style.css">
<link rel="stylesheet" href="__WAP_PUBLIC__/nowiconfont/iconfont.css">
{include file="public/left" /}
<style>
    .box {
        box-shadow: none;
    }

    .show-title {
        margin: 0 0 0px;
        font-size: 24px;
        color: #6c757d;
    }

    .content-bottom {
        margin-bottom: 10rem;
    }

    .show-module-all {
        padding: 0;
    }

    .box-body-spec {
        padding: 0;
    }

    .show-module {
        display: inline-block;
        padding: 0;
        text-align: center;
        font-size: 1rem;
    }

    .show-module:first-child {
        margin-left: .9rem;
    }

    .table th, .table td {
        border-bottom: 1px solid #dee2e6;
        border-top: 0;
        padding: .5rem 1rem;
    }

    .right-th {
        text-align: right;
    }

    .show-module-sign {
        color: #3c7fff;
    }

    .content-header-spec {
        margin-top: .7rem;
    }

    .show-examine-content {
        text-align: center;
        font-size: 1.5rem;
        font-weight: 900;
        margin: 2rem 0;
    }

    .timeline:before {
        width: 0;
    }

    .cd-horizontal-timeline .events-wrapper::before, .cd-horizontal-timeline .events-wrapper::after {
        width: 0;
    }

    .cd-horizontal-timeline .events-wrapper {
        margin: 0 !important;
    }

    .events ol li a {
        font-size: .8rem !important;
    }

    .cd-horizontal-timeline .timeline {
        padding: 0;
    }

    .special-row {
        width: 100%;
        margin-right: 0;
        margin-left: 0;
    }

    .index_message {
        border-radius: 8px !important;
        margin-bottom: 1rem;
        height: auto !important;
    }

    .index_message .p1 {
        margin-bottom: 0;
    }

    .index_message .p1, .index_message .p2 {
        padding-bottom: 0;
    }

    .specia-m {
        margin-bottom: 10px;
    }

    .examineStatus, .company {
        display: inline-block;
        width: 49%;
    }

    .company {
        text-align: left;
    }

    .examineStatus {
        text-align: right;
    }

    .p3, .p3 a {
        color: #333;
        text-align: right;
    }

    .edit {
        color: #fff !important;
    }
</style>
<div class="content-wrapper">
    <section class="content-header show-content-title">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a class="sendA" href="javascript:history.back(-1)">
                    < &nbsp;
                </a>
            </li>
            <li class="breadcrumb-item active sendContent">招标审核</li>
        </ol>
    </section>
    <section class="content-header header-top">
        <div class="col-12">
            <div class="box box-solid bg-black">
                <div class="box-body box-body-spec">
                    <div class="row">
                        <div class="col-12 show-module-all">
                            <div class="col-3 show-module">基本信息</div>
<!--                            <div class="col-3 show-module">对竞投方资格要求</div>-->
<!--                            <div class="col-3 show-module">对承租方经营出租物要求</div>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="content-header content-bottom content-header-spec">
        <div class="col-12">
            <div class="box box-solid bg-black">
                <div class="box-body box-body-spec">
                    <div class="row">
                        <div class="col-lg-12">
                            
                            <div class="table-container table-responsive show-module-content" style="display: none;">
                                <table class="table">
                                    <tr>
                                        <th class="orderable">
                                            租赁方
                                        </th>
                                        <th class="orderable right-th">
                                            {$demondInfo.rent_name}
                                        </th>
                                    </tr>
                                    <tr>
                                        <th class="orderable">
                                            楼宇名称
                                        </th>
                                        <th class="orderable right-th">
                                            {$demondInfo.rent_house}
                                        </th>
                                    </tr>
                                    <tr>
                                        <th class="orderable">
                                            租赁开始时间
                                        </th>
                                        <th class="orderable right-th">
                                            {$demondInfo.enrol_start_time}
                                        </th>
                                    </tr>
                                    <tr>
                                        <th class="orderable">
                                            租赁结束时间
                                        </th>
                                        <th class="orderable right-th">
                                            {$demondInfo.enrol_end_time}
                                        </th>
                                    </tr>
                                    <tr>
                                        <th class="orderable">
                                            租赁层数
                                        </th>
                                        <th class="orderable right-th">
                                            {$demondInfo.rent_floor}
                                        </th>
                                    </tr>
                                    <tr>
                                        <th class="orderable">
                                            租赁面积
                                        </th>
                                        <th class="orderable right-th">
                                            {$demondInfo.rent_area}
                                        </th>
                                    </tr>
                                    <tr>
                                        <th class="orderable">
                                            租赁价格
                                        </th>
                                        <th class="orderable right-th">
                                            {$demondInfo.rent_price}
                                        </th>
                                    </tr>
                                    <tr>
                                        <th class="orderable">
                                            合同扫描件
                                        </th>
                                        <th class="orderable right-th">
                                            <a target="_blank" href="{$demondInfo.pdf}">点击查看</a>
                                        </th>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
</div>
{include file="public/bottom" /}
<!--   Core JS Files   -->
<script src="__WAP_PUBLIC__/js/layer.js" type="text/javascript"></script>
<script src="__WAP_PUBLIC__/js/common1.js" type="text/javascript"></script>
<script src="__WAP_PUBLIC__/js/bootstrap.min.14d449eb8876.js" type="text/javascript"></script>
<script src="__WAP_PUBLIC__/js/template.eca497836b5a.js"></script>
<script>
    $(function () {

        $('.getA').attr('href', $('.sendA').attr("href"));
        $('.pageName').html($(".sendContent").html());

        $('.filling-line').css("transform", 'scaleX(' + $('.selected').length * 0.17 + ')');

        $('.logout').click(function () {
            //询问框
            layer.open({
                content: '{:lang("logout_tip")}'
                , skin: 'loginout'
                , btn: ['{:lang("yes")}', '{:lang("no")}']
                , yes: function (index) {
                    window.location.href = "{:url('index/Login/logout')}";
                }
            });
        });

            $(this).siblings().removeClass("show-module-sign");
            $(this).addClass("show-module-sign");
            var sinId = $(this).index();
            $('.show-module-content').eq(sinId).css("display", "block");
            $('.show-module-content').eq(sinId).siblings().css("display", "none");

        function checkpassword(v) {
            var numasc = 0;
            var charasc = 0;
            var otherasc = 0;
            if (0 == v.length) {
                return "{:lang('pw_not_null')}";
            } else if (v.length < 6 || v.length > 12) {
                return "{:lang('pw_length_tip')}";
            } else {
                for (var i = 0; i < v.length; i++) {
                    var asciiNumber = v.substr(i, 1).charCodeAt();
                    if (asciiNumber >= 48 && asciiNumber <= 57) {
                        numasc += 1;
                    }
                    if ((asciiNumber >= 65 && asciiNumber <= 90) || (asciiNumber >= 97 && asciiNumber <= 122)) {
                        charasc += 1;
                    }
                    if ((asciiNumber >= 33 && asciiNumber <= 47) || (asciiNumber >= 58 && asciiNumber <= 64) || (asciiNumber >= 91 && asciiNumber <= 96) || (asciiNumber >= 123 && asciiNumber <= 126)) {
                        otherasc += 1;
                    }
                }
                if (0 == numasc) {
                    return "{:lang('pw_contain_nb')}";
                } else if (0 == charasc) {
                    return "{:lang('pw_contain_char')}";
                } else if (0 == otherasc) {
                    return "{:lang('pw_contain_spec')}";
                } else {
                    return 1000;
                }
            }
        };
        $("#annex_address_show").change(function () {
            var formdata = new FormData();
            formdata.append("annex_address", $("#annex_address_show")[0].files[0]);
            $.ajax({
                url: "{:url('Examine/updateFile')}",
                type: "post",
                data: formdata,
                processData: false,    // 不处理数据
                contentType: false,    // 不设置内容类型
                success: function (res) {
                    var res = JSON.parse(res);
                    layer.msg(res.info);
                    if (res.code == 100) {
                        $("#annex_address").val(res.data.address);
                        $(".showNowAnnex").html("<a href='" + res.data.address + "' download='" + res.data.address + "'>当前附件</a>");
                    }
                }
            })
        });
        $('.toUrl').click(function () {
            $("#attachInfo").submit(function () {
                var forthat = $(this);
                //询问框
                layer.open({
                    content: '确认提交吗？'
                    , btn: ['是', '否']
                    , skin: 'loginout'
                    , yes: function (index) {
                        var status = 1;
                        //验证
                        $('input').each(function () {
                            var that = $(this);
                            if ($(this).attr('name') != 'id' && $(this).attr('name') != 'bid_id' && $(this).attr('name') != undefined && $(this).attr('name') != '') {
                                if ($(this).val() == '') {
                                    layer.msg(that.attr('placeholder'), {time: 2000});
                                    status = 0;
                                    return false;
                                }
                            }
                        });

                        if (status == 0) {
                            return false;
                        }

                        layer.open({
                            type: 3,
                            skin: 'loading_style'
                        });
                        //1.发送数据到服务器
                        $.post("{:url('Bid/uploadBidAttach')}", forthat.serialize(), function (res) {
                            var res = JSON.parse(res);
                            layer.closeAll();
                            layer.msg(res.info, {time: 2000}, function () {
                                if (res.code == 100) {
                                    setTimeout(function () {
                                        window.location.reload();
                                    }, 2000);
                                }
                            })
                        });
                        //2.不让页面跳转
                        return false;
                        //如果这个方法没有返回值，或者返回为true，则表单提交，如果返回为false，则表单不提交
                    }
                    , no: function (index) {
                        return false;
                    }
                });

                return false;
            });
        });

        $("#id_password").on('focus', function () {
            let that = this;
            let str = `<p>1.{:lang('pwd_check_msg1')}</p>
                    <p>2.{:lang('pwd_check_msg2')}</p>
                    <p>3.{:lang('pwd_check_msg3')}</p>`
            layer.tips(str, that, {tips: 3, skin: 'pwdmsg', time: 0})
        });

        $("#id_password").on('blur', function () {
            layer.closeAll();
        });

        var sendStatus = 0;
        $("body").on("click", ".sendCode", function () {
            if (sendStatus == 1) {
                // layer.open({
                //     content: "{:lang('do_click_again')}"
                //     ,skin: 'msg'
                //     ,time: 2 //2秒后自动关闭
                // });
                layer.msg("{:lang('do_click_again')}", {time: 2000})

                return false;
            }
            let that = $(this);
            if (that.val() != '{:lang("send")}') {
                return false;
            }
            let token = $("input[ name='__token__']").val();
            if (token == '') {
                // layer.open({
                //     content: "{:lang('complete_the_parameters')}"
                //     ,skin: 'msg'
                //     ,time: 2 //2秒后自动关闭
                // });
                layer.msg("{:lang('complete_the_parameters')}", {time: 2000})

                return false;
            }
            let lang = 'zh-tw';
            if (getCookie('language')) {
                lang = getCookie('language');
            }
            var senData = {
                token: token,
                status: 1,
                lang: lang,
            };
            sendStatus = 1;
            $.post("{:url('/index/User/sendEmailCode')}", senData,
                function (res) {
                    var res = JSON.parse(res);
                    // layer.open({
                    //     content: res.info
                    //     ,skin: 'msg'
                    //     ,type:1
                    //     ,time: 2 //2秒后自动关闭
                    // });
                    layer.msg(res.info, {time: 2000}, function () {
                        countdown(60, that, that.val());
                        $("input[ name='__token__']").attr('value', res.data.newtoken);
                        sendStatus = 0;
                    })

                });
        });
        $('.personInfo').click(function () {
            let token = $("input[ name='__token__']").val();
            var phone = $("input[ name='phone']").val();
            let email = $("input[ name='useremail']").val();
            let password = $("input[ name='password']").val();
            let country = $('#id_country  option:selected').val();
            let code = $("input[ name='code']").val();

            if (phone == undefined) {
                phone = '';
            }

            if (token == '' || country == '' || email == '' || code == '') {
                layer.msg("{:lang('complete_the_parameters')}", {time: 2000})
                return false;
            }
            if (!email.match(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/)) {
                layer.msg("{:lang('please_fill_in_the_correct_email_address')}", {time: 2000});
                return false;
            }
            if (password != '') {
                if (checkpassword(password) != 1000) {
                    layer.msg(checkpassword(password), {time: 2000});
                    return false;
                }
            }

            let lang = 'zh-tw';
            if (getCookie('language')) {
                lang = getCookie('language');
            }
            var senData = {
                token: token,
                phone: phone,
                country: country,
                email: email,
                password: password,
                code: code,
                lang: lang,
            };
            layer.open({
                type: 3,
                skin: 'loading_style'
            })
            $.post($(this).attr('data-send-href'), senData,
                function (res) {
                    var res = JSON.parse(res);
                    setTimeout(function () {
                        layer.closeAll();
                        layer.msg(res.info, {time: 2000}, function () {
                            window.location.reload();
                        })
                        // layer.open({
                        //     content: res.info
                        //     ,skin: 'msg'
                        //     ,time: 2 //2秒后自动关闭
                        // });
                        // setTimeout(function(){ window.location.reload();},2000);
                    }, 500);
                });
        });
    });
</script>
</body>

</html>